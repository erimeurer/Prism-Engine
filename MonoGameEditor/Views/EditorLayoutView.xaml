<UserControl x:Class="MonoGameEditor.Views.EditorLayoutView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:dock="https://github.com/Dirkster99/AvalonDock"
             xmlns:dockThemes="clr-namespace:AvalonDock.Themes;assembly=AvalonDock.Themes.VS2013"
             xmlns:vm="clr-namespace:MonoGameEditor.ViewModels"
             mc:Ignorable="d" 
             d:DesignHeight="768" d:DesignWidth="1366">
    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis"/>
    </UserControl.Resources>

    <Grid>
        <dock:DockingManager x:Name="dockManager" 
                             AllowMixedOrientation="True"
                             DocumentsSource="{Binding Documents}"
                             ActiveContent="{Binding ActiveDocument, Mode=TwoWay}">
            <dock:DockingManager.Theme>
                <dockThemes:Vs2013DarkTheme/>
            </dock:DockingManager.Theme>
            
            <!-- DocumentHeaderTemplate generates title for Source-created documents -->
            <dock:DockingManager.DocumentHeaderTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Title}" TextTrimming="CharacterEllipsis"/>
                </DataTemplate>
            </dock:DockingManager.DocumentHeaderTemplate>

            <!-- Style for Source-created documents -->
            <dock:DockingManager.LayoutItemContainerStyle>
                <Style TargetType="{x:Type dock:LayoutItem}">
                    <Setter Property="Title" Value="{Binding Model.Title}"/>
                    <Setter Property="ContentId" Value="{Binding Model.ContentId}"/>
                    <Setter Property="CanClose" Value="False"/>
                </Style>
            </dock:DockingManager.LayoutItemContainerStyle>
            
            <dock:LayoutRoot>
                <dock:LayoutPanel Orientation="Vertical">
                    <dock:LayoutPanel Orientation="Horizontal">
                        
                        <!-- Left: Hierarchy -->
                        <dock:LayoutAnchorablePane DockWidth="250">
                            <dock:LayoutAnchorable Title="Hierarchy" ContentId="Hierarchy" CanClose="False">
                                <ContentControl Content="{Binding Hierarchy}"/>
                            </dock:LayoutAnchorable>
                        </dock:LayoutAnchorablePane>

                        <!-- Center: Scene & Game Views (Documents) -->
                        <dock:LayoutDocumentPaneGroup>
                             <dock:LayoutDocumentPane/> <!-- DocumentsSource populates this -->
                        </dock:LayoutDocumentPaneGroup>
                        
                        <!-- Right: Inspector -->
                        <dock:LayoutAnchorablePane DockWidth="300">
                             <dock:LayoutAnchorable Title="Inspector" ContentId="Inspector" CanClose="False">
                                 <ContentControl Content="{Binding Inspector}"/>
                             </dock:LayoutAnchorable>
                        </dock:LayoutAnchorablePane>
                        
                    </dock:LayoutPanel>

                    <!-- Bottom: Project & Console -->
                    <dock:LayoutAnchorablePane DockHeight="200">
                         <dock:LayoutAnchorable Title="Project" ContentId="Project" CanClose="False">
                             <ContentControl Content="{Binding Project}"/>
                         </dock:LayoutAnchorable>
                         <dock:LayoutAnchorable Title="Console" ContentId="Console" CanClose="False">
                             <ContentControl Content="{Binding Console}"/>
                         </dock:LayoutAnchorable>
                    </dock:LayoutAnchorablePane>
                </dock:LayoutPanel>
            </dock:LayoutRoot>
        </dock:DockingManager>
    </Grid>
</UserControl>
