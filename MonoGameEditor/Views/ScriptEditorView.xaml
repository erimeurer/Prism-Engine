<UserControl x:Class="MonoGameEditor.Views.ScriptEditorView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:wv2="clr-namespace:Microsoft.Web.WebView2.Wpf;assembly=Microsoft.Web.WebView2.Wpf"
             Background="#252526">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="32"/>  <!-- Toolbar -->
            <RowDefinition Height="*"/>   <!-- Editor -->
            <RowDefinition Height="24"/>  <!-- Status Bar -->
        </Grid.RowDefinitions>

        <!-- Toolbar -->
        <Border Grid.Row="0" Background="#2D2D30" BorderBrush="#3F3F46" BorderThickness="0,0,0,1">
            <Grid Margin="8,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" 
                           Text="{Binding ScriptName}"
                           Foreground="#CCCCCC"
                           FontSize="13"
                           VerticalAlignment="Center"
                           Margin="0,0,16,0"/>

                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <Button Content="ðŸ’¾ Save" 
                            Command="{Binding SaveCommand}"
                            Background="Transparent"
                            Foreground="#CCCCCC"
                            BorderThickness="0"
                            Padding="8,4"
                            Margin="0,0,4,0"
                            Cursor="Hand"
                            ToolTip="Save (Ctrl+S)"/>
                    <Button Content="âœ•" 
                            Click="Close_Click"
                            Background="Transparent"
                            Foreground="#CCCCCC"
                            BorderThickness="0"
                            Padding="8,4"
                            Cursor="Hand"
                            ToolTip="Close"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Monaco Editor (WebView2) -->
        <wv2:WebView2 x:Name="webView"
                      Grid.Row="1"
                      DefaultBackgroundColor="#1E1E1E"/>

        <!-- Status Bar -->
        <Border Grid.Row="2" Background="#007ACC" BorderBrush="#3F3F46" BorderThickness="0,1,0,0">
            <Grid Margin="8,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0"
                           Text="{Binding ScriptPath}"
                           Foreground="White"
                           FontSize="11"
                           VerticalAlignment="Center"/>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <TextBlock Text="{Binding CurrentLine, StringFormat='Ln {0}'}"
                               Foreground="White"
                               FontSize="11"
                               VerticalAlignment="Center"
                               Margin="0,0,8,0"/>
                    <TextBlock Text="{Binding CurrentColumn, StringFormat='Col {0}'}"
                               Foreground="White"
                               FontSize="11"
                               VerticalAlignment="Center"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</UserControl>
